---
title: "Method1_Quantile_Regression"
output: html_document
---

# Set Up

## Load packages

```{r}
knitr::opts_chunk$set(echo = TRUE)

library(tidyverse)
library(readr)
library(readxl)
library(splines)
library(mgcv)
library(ggcorrplot)
library(table1)
library(cowplot)
library(ggplot2)
```

## Setting template

```{r}
knitr::opts_chunk$set(
  fig.width = 6,
  fig.asp = .6,
  out.width = "90%"
)

theme_set(theme_minimal() + theme(legend.position = "right"))
 
options(
  ggplot2.continuous.colour = "viridis",
  ggplot2.continuous.fill = "viridis"
)

scale_colour_discrete = scale_colour_viridis_d
scale_fill_discrete = scale_fill_viridis_d
```

## Load dataset

```{r}
library(readr)
library(tidyverse)
eqi_lbw_clean_df <- read_csv("~/Desktop/Files/AAMES/data/eqi_lbw_clean_df.csv")
```
```{r}
install.packages("Qtools")
```
```{r}
library(Qtools)
```

```{r}
Mods25_eqi <- rq.counts(num_low_birthweight_births ~ eqi + rucc + perc_smokers + perc_age1849, 
            data = eqi_lbw_clean_df, tau= 0.25, offset= log_live_births, alpha =0.05)

eqi_lbw_clean_df |>
  mutate(cat_rucc = factor(rucc, levels = c("metropolitan-urbanized", "less urbanized", "thinly populated", "nonmetropolitan-urbanized")))
```
```{r}
library(quantreg)
summary.rq(Mods25_eqi)
```

